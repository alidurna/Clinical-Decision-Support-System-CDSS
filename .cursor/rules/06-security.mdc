---
description: GÃ¼venlik kurallarÄ± â€” kimlik doÄŸrulama, yetkilendirme, veri koruma, XSS/CSRF (Google 2026 Standards)
alwaysApply: true
---

# ğŸ”’ GÃ¼venlik KurallarÄ±

**Versiyon:** 2.0.0 â€” Google 2026 Standards
**Ã–ncelik:** ğŸ”´ P0 â€” Kritik
**Kapsam:** TÃ¼m frontend ve backend kodu

---

## Kimlik DoÄŸrulama (Authentication)

### JWT Token YÃ¶netimi
- JWT token kullanÄ±lÄ±r; token **`httpOnly cookie`** ile saklanÄ±r (tercih edilen).
- Alternatif: `localStorage` (SADECE geliÅŸtirme ortamÄ±nda).
- Token her API isteÄŸinde `Authorization: Bearer <token>` header'Ä±nda gÃ¶nderilir.
- Token sÃ¼resi dolduÄŸunda kullanÄ±cÄ± login sayfasÄ±na yÃ¶nlendirilir.
- **Refresh token** mekanizmasÄ± ile sessiz yenileme yapÄ±lÄ±r.

### Token GÃ¼venlik KurallarÄ±
- âŒ Token'Ä± URL query param olarak gÃ¶nderme
- âŒ Token'Ä± `console.log` ile yazdÄ±rma
- âŒ Token'Ä± state management'a (Redux/Context) koyma
- âœ… Token'Ä± `httpOnly` cookie veya `localStorage` ile sakla
- âœ… Token sÃ¼resini kontrol et (expiry check)

---

## Yetkilendirme (Authorization)

### Rol TabanlÄ± EriÅŸim KontrolÃ¼ (RBAC)
- **Roller:** `ADMIN`, `DOCTOR`, `PATIENT`
- Her endpoint **rol bazlÄ±** korunur.
- Rol kontrolÃ¼ **hem frontend hem backend**'de yapÄ±lÄ±r.
- Frontend tek baÅŸÄ±na **yeterli deÄŸil**; backend validasyonu zorunlu.

```tsx
// PrivateRoute â€” Rol tabanlÄ± route korumasÄ±
const PrivateRoute = ({ children, roles }: { children: ReactNode; roles?: string[] }) => {
  const { user, isAuthenticated } = useAuth()
  
  if (!isAuthenticated) return <Navigate to="/login" />
  if (roles && !roles.includes(user?.role)) return <Navigate to="/unauthorized" />
  
  return <>{children}</>
}

// KullanÄ±m
<PrivateRoute roles={['ADMIN', 'DOCTOR']}>
  <PatientDetails />
</PrivateRoute>
```

---

## Veri Koruma

### Zorunlu Kurallar
1. **Åifre:** Frontend'de dÃ¼z metin gÃ¶sterme; `type="password"` **zorunlu**. Backend'de **bcrypt hash**.
2. **KiÅŸisel veri:** Hasta bilgileri (TC, telefon, adres) **loglanmaz**, `console.log`'a **yazÄ±lmaz**.
3. **Environment:** API key, secret, ÅŸifre `.env` dosyasÄ±nda; `.env` git'e **eklenmez** (`.gitignore`'da).
4. **HIPAA Uyumu:** Hasta saÄŸlÄ±k verileri ÅŸifreli iletim (HTTPS) ve ÅŸifreli saklama.

### XSS KorumasÄ±
- âŒ KullanÄ±cÄ± girdisini doÄŸrudan `dangerouslySetInnerHTML` ile render etme.
- âœ… HTML sanitization kÃ¼tÃ¼phanesi kullan (DOMPurify).
- âœ… Input validasyonu hem frontend hem backend'de.

### CSRF KorumasÄ±
- âœ… API Gateway'de CSRF token zorunlu (form POST istekleri iÃ§in).
- âœ… `SameSite` cookie attribute kullan.

### CORS KurallarÄ±
- âœ… Backend'de **sadece izin verilen origin'ler** tanÄ±mlanÄ±r.
- âŒ `Access-Control-Allow-Origin: *` yasak (Ã¼retimde).

---

## Form GÃ¼venliÄŸi

- GiriÅŸ/kayÄ±t formlarÄ±nda `required` ve tip doÄŸrulama:
  - Email: formatÄ± geÃ§erli olmalÄ±
  - Åifre: minimum **8 karakter**, en az 1 bÃ¼yÃ¼k + 1 kÃ¼Ã§Ã¼k harf + 1 rakam
- **Rate limiting:** Backend'de brute-force korumasÄ± (5 baÅŸarÄ±sÄ±z deneme â†’ 15dk bekleme).
- **CAPTCHA:** Art arda baÅŸarÄ±sÄ±z denemelerde CAPTCHA gÃ¶ster.

---

## Hassas Dosyalar (Git'e EKLENMEZ)

```
.env, .env.local, .env.*.local
credentials.json, serviceAccountKey.json
*.pem, *.key, *.cert
application-*.yml (hassas config)
```

---

## HTTPS ve Ä°letiÅŸim GÃ¼venliÄŸi

- TÃ¼m API iletiÅŸimi **HTTPS** Ã¼zerinden.
- GeliÅŸtirme ortamÄ±nda HTTP kabul edilir, Ã¼retimde **HTTPS zorunlu**.
- Content-Security-Policy (CSP) header'Ä± ekle.
- Strict-Transport-Security (HSTS) header'Ä± ekle.

---

## âŒ GÃ¼venlik Yasak Listesi

1. âŒ Hardcoded API key / secret
2. âŒ Token'Ä± URL'de gÃ¶nderme
3. âŒ `console.log` ile hasta verisi yazdÄ±rma
4. âŒ `dangerouslySetInnerHTML` ile kullanÄ±cÄ± girdisi render
5. âŒ `eval()` kullanÄ±mÄ±
6. âŒ CORS wildcard (`*`) Ã¼retimde
7. âŒ HTTP Ã¼zerinden hassas veri iletimi (Ã¼retimde)
8. âŒ Åifreyi dÃ¼z metin saklama
9. âŒ `.env` dosyasÄ±nÄ± git'e commit etme
10. âŒ Inline script (CSP ihlali)
